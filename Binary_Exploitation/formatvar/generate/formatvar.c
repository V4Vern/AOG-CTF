#include <stdio.h>
#include <stdlib.h>

volatile int target = 0;

void print_flag() {
	char flag[64];
	FILE *f = fopen("flag.txt","r");
	if (f == NULL) {
		printf("Flag File is Missing.\n");
		exit(0);
	}

	fgets(flag,sizeof(flag),f);
	printf("%s\n", flag);
}

void vuln() {
	char buffer[32] = {0x00};

	printf("%s\n", "Format my variable to better");
	fgets(buffer, sizeof(buffer), stdin);

	printf(buffer);

	if (target == 1234) {
		printf("%s\n", "Well done!");
		print_flag();
	} else {
		printf("Target is %d :(\n", target);
	}
}


int main(int argc, char **argv) {
	setvbuf(stdin,NULL,2,0);
	setvbuf(stdout,NULL,2,0);
	setvbuf(stderr,NULL,2,0);
	vuln();
}